<div style="display:flex;flex-direction:column;height:100%;
background-color: rgb(250, 250, 250);" *ngIf="famInfo.f">
    <div>
        <mat-card>
            <div>
                <div style="    display: flex;
                justify-content: space-between;">
                    <button mat-icon-button style="transform: rotate(180deg);" [mat-dialog-close]>
                        <mat-icon>arrow_back</mat-icon>
                    </button>
                    <app-dots-menu [buttons]="buttons"></app-dots-menu>
                </div>
                <h3 style="margin-bottom:8px">{{famInfo.f.name}}</h3>

                <ng-container *ngFor="let p of phones">
                    <div class="icon-and-text" *ngIf="p.phone" (click)="p.phone.call()">
                        <mat-icon>phone</mat-icon>
                        <div>
                            {{p.phone.displayValue}} <span *ngIf="p.desc">, {{p.desc}}</span>
                        </div>
                    </div>
                </ng-container>
                <div *ngIf="famInfo.f.deliveryComments" class="icon-and-text">
                    <mat-icon style="color:red">comment</mat-icon>
                    <div>
                        <strong>
                            {{famInfo.f.deliveryComments}}
                        </strong>
                    </div>
                </div>
                <div class="top-button-bar">
                    <button mat-flat-button color="primary" class="rounded-button"
                        (click)="famInfo.navigate(famInfo.f)">ניווט
                        <mat-icon>near_me</mat-icon>
                    </button>
                    <button mat-stroked-button color="primary" class="rounded-button" *ngIf="dialPhone"
                        (click)="dialPhone.call()">חיוג
                        <mat-icon>phone</mat-icon>
                    </button>
                    <img src="assets/whatsapp.png" *ngIf="this.whatsAppPhone"
                        (click)="this.famInfo.sendWhatsapp(this.whatsAppPhone)">
                </div>

            </div>
        </mat-card>
    </div>
    <div style=" flex-grow:1;padding:8px;    overflow-y: scroll;    ">

        <h4 style="display:inline">{{settings.lang.basket}}</h4>:
        <span *ngIf="famInfo.f.quantity>1">{{famInfo.f.quantity}} X</span>
        {{famInfo.f.$.basketType.displayValue}}
        <mat-card *ngIf="famInfo.whatToTake">
            <span style="    white-space: pre;">{{famInfo.whatToTake}}</span>
        </mat-card>
        <h4>{{settings.lang.address}}:</h4>
        <mat-card>



            <ng-container *ngIf="!famInfo.f.addressOk">
                <mat-icon style="margin-right:5px" color="accent">warning
                </mat-icon>
                {{settings.lang.inacurateAddress}}
            </ng-container>

            <div (click)="famInfo.navigate(famInfo.f)"> {{famInfo.f.getAddressDescription()}} </div>

            <ng-container *ngIf="famInfo.f.entrance">
                {{famInfo.f.$.entrance.metadata.caption}} {{famInfo.f.entrance}}
            </ng-container>
            <ng-container *ngIf="famInfo.f.floor">
                {{famInfo.f.$.floor.metadata.caption}} {{famInfo.f.floor}}
            </ng-container>
            <ng-container *ngIf="famInfo.f.appartment">
                {{famInfo.f.$.appartment.metadata.caption}} {{famInfo.f.appartment}}
            </ng-container>

            <div *ngIf="famInfo.f.buildingCode" class="icon-and-text">
                <mat-icon>vpn_key</mat-icon>
                <div>
                    {{settings.lang.buildingCode}}: <strong>
                        {{famInfo.f.buildingCode}}</strong>
                </div>
            </div>
            <div *ngIf="famInfo.f.addressComment" class="icon-and-text">
                <mat-icon> announcement</mat-icon>
                <strong>
                    {{famInfo.f.addressComment}}
                </strong>
            </div>
            <a *ngIf="famInfo.hasImages&&!famInfo.images" class="icon-and-text" (click)="famInfo.loadImages()">
                <mat-icon style="color:inherit"> image</mat-icon>
                <div>
                    {{settings.lang.loadImages}}
                </div>
            </a>
            <app-images [readonly]="true" [images]="famInfo.images"></app-images>

        </mat-card>
    </div>
    <div style="    display: flex;
    gap: 8px;
    padding: 8px;
    justify-content: space-between;">
        <button mat-flat-button color="primary" (click)="deliveredToFamily()">
            {{settings.deliveredButtonText}}
        </button>
        <button mat-stroked-button color="primary">
            {{settings.problemButtonText}}
        </button>
    </div>
</div>